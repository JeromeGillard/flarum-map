{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@jeromegillard/map/./src/common/index.ts","webpack://@jeromegillard/map/./src/forum/components/leaflet.ChineseTmsProviders.js","webpack://@jeromegillard/map/./src/forum/components/mapBBCode.js","webpack://@jeromegillard/map/./src/forum/components/mapConfigHelper.js","webpack://@jeromegillard/map/./src/forum/components/mapFile.js","webpack://@jeromegillard/map/./src/forum/index.js","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/Model']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/app']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/components/TextEditor']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/components/TextEditorButton']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/extend']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/utils/mixin']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['components/Page']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['components/Post']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['forum/app']\"","webpack://@jeromegillard/map/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@jeromegillard/map/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@jeromegillard/map/./node_modules/@babel/runtime/regenerator/index.js","webpack://@jeromegillard/map/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@jeromegillard/map/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@jeromegillard/map/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@jeromegillard/map/webpack/bootstrap","webpack://@jeromegillard/map/webpack/runtime/compat get default export","webpack://@jeromegillard/map/webpack/runtime/define property getters","webpack://@jeromegillard/map/webpack/runtime/hasOwnProperty shorthand","webpack://@jeromegillard/map/webpack/runtime/make namespace object","webpack://@jeromegillard/map/./forum.ts"],"sourcesContent":["import app from 'flarum/common/app';\n\napp.initializers.add('jeromegillard/osm', () => {\n  console.log('[jeromegillard/osm] Hello, forum and admin!');\n});\n","// this L.CRS.Baidu from https://github.com/muyao1987/leaflet-tileLayer-baidugaode/blob/master/src/tileLayer.baidu.js\n\nif (L.Proj) {\n  L.CRS.Baidu = new L.Proj.CRS('EPSG:900913', '+proj=merc +a=6378206 +b=6356584.314245179 +lat_ts=0.0 +lon_0=0.0 +x_0=0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs', {\n      resolutions: function () {\n          var level = 19\n          var res = [];\n          res[0] = Math.pow(2, 18);\n          for (var i = 1; i < level; i++) {\n              res[i] = Math.pow(2, (18 - i))\n          }\n          return res;\n      }(),\n      origin: [0, 0],\n      bounds: L.bounds([20037508.342789244, 0], [0, 20037508.342789244])\n  });\n}\n\nL.TileLayer.ChinaProvider = L.TileLayer.extend({\n\n  initialize: function(type, options) { // (type, Object)\n      var providers = L.TileLayer.ChinaProvider.providers;\n\n      options = options || {}\n\n      var parts = type.split('.');\n\n      var providerName = parts[0];\n      var mapName = parts[1];\n      var mapType = parts[2];\n\n      var url = providers[providerName][mapName][mapType];\n      options.subdomains = providers[providerName].Subdomains;\n      options.key = options.key || providers[providerName].key;\n\n      if ('tms' in providers[providerName]) {\n          options.tms = providers[providerName]['tms']\n      }\n\n      L.TileLayer.prototype.initialize.call(this, url, options);\n  },\n\n  getTileUrl: function (coords) {\n  var data = {\n    s: this._getSubdomain(coords),\n    x: coords.x,\n    y: coords.y,\n    z: this._getZoomForUrl(),\n  };\n  if (this._map && !this._map.options.crs.infinite) {\n    var invertedY = this._globalTileRange.max.y - coords.y;\n    if (this.options.tms) {\n      data['y'] = invertedY;\n    }\n    data['-y'] = invertedY;\n  }\n\n      data.sx = data.x >> 4\n      data.sy = (( 1 << data.z) - data.y) >> 4\n\n  return L.Util.template(this._url, L.Util.extend(data, this.options));\n},\n});\n\nL.TileLayer.ChinaProvider.providers = {\n  TianDiTu: {\n      Normal: {\n          Map: \"//t{s}.tianditu.gov.cn/DataServer?T=vec_w&X={x}&Y={y}&L={z}&tk={key}\",\n          Annotion: \"//t{s}.tianditu.gov.cn/DataServer?T=cva_w&X={x}&Y={y}&L={z}&tk={key}\"\n      },\n      Satellite: {\n          Map: \"//t{s}.tianditu.gov.cn/DataServer?T=img_w&X={x}&Y={y}&L={z}&tk={key}\",\n          Annotion: \"//t{s}.tianditu.gov.cn/DataServer?T=cia_w&X={x}&Y={y}&L={z}&tk={key}\"\n      },\n      Terrain: {\n          Map: \"//t{s}.tianditu.gov.cn/DataServer?T=ter_w&X={x}&Y={y}&L={z}&tk={key}\",\n          Annotion: \"//t{s}.tianditu.gov.cn/DataServer?T=cta_w&X={x}&Y={y}&L={z}&tk={key}\"\n      },\n      Subdomains: ['0', '1', '2', '3', '4', '5', '6', '7'],\n      key: \"174705aebfe31b79b3587279e211cb9a\"\n  },\n\n  GaoDe: {\n      Normal: {\n          Map: '//webrd0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}'\n      },\n      Satellite: {\n          Map: '//webst0{s}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}',\n          Annotion: '//webst0{s}.is.autonavi.com/appmaptile?style=8&x={x}&y={y}&z={z}'\n      },\n      Subdomains: [\"1\", \"2\", \"3\", \"4\"]\n  },\n\n  Google: {\n      Normal: {\n          Map: \"//www.google.cn/maps/vt?lyrs=m@189&gl=cn&x={x}&y={y}&z={z}\"\n      },\n      Satellite: {\n          Map: \"//www.google.cn/maps/vt?lyrs=s@189&gl=cn&x={x}&y={y}&z={z}\",\n          Annotion: \"//www.google.cn/maps/vt?lyrs=y@189&gl=cn&x={x}&y={y}&z={z}\"\n      },\n      Subdomains: []\n  },\n\n  Geoq: {\n      Normal: {\n          Map: \"//map.geoq.cn/ArcGIS/rest/services/ChinaOnlineCommunity/MapServer/tile/{z}/{y}/{x}\",\n          PurplishBlue: \"//map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}\",\n          Gray: \"//map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetGray/MapServer/tile/{z}/{y}/{x}\",\n          Warm: \"//map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetWarm/MapServer/tile/{z}/{y}/{x}\",\n      },\n      Theme: {\n          Hydro: \"//thematic.geoq.cn/arcgis/rest/services/ThematicMaps/WorldHydroMap/MapServer/tile/{z}/{y}/{x}\"\n      },\n      Subdomains: []\n  },\n\n  OSM: {\n      Normal: {\n          Map: \"//{s}.tile.osm.org/{z}/{x}/{y}.png\",\n      },\n      Subdomains: ['a', 'b', 'c']\n  },\n\n  Baidu: {\n      Normal: {\n          Map: '//online{s}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles=pl&scaler=1&p=1'\n      },\n      Satellite: {\n          Map: '//shangetu{s}.map.bdimg.com/it/u=x={x};y={y};z={z};v=009;type=sate&fm=46',\n          Annotion: '//online{s}.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles=sl&v=020'\n      },\n      Subdomains: '0123456789',\n      tms: true\n  },\n\n  Tencent: {\n      Normal: {\n          Map: \"//rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={-y}&type=vector&styleid=3\",\n      },\n      Satellite: {\n          Map: \"//p{s}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{-y}.jpg\",\n      },\n      Terrain: {\n          Map: \"//p{s}.map.gtimg.com/demTiles/{z}/{sx}/{sy}/{x}_{-y}.jpg\"\n      },\n      Subdomains: '0123',\n  }\n\n};\n\nL.tileLayer.chinaProvider = function(type, options) {\n  return new L.TileLayer.ChinaProvider(type, options);\n};\n","export default function insertAtCursor(tilesProvider, style, zoom) {\n\n  (async () => {\n\n    let input = document.querySelector('textarea.FormControl');\n\n    let pos = input.selectionStart\n    let front = (input.value).substring(0, pos);\n    let back = (input.value).substring(pos, input.value.length);\n    let middle = `[map provider=${tilesProvider??'osm'} style=${style??'street'} zoom=${zoom??13} title='${app.translator.trans('jeromegillard-map.forum.text_editor.marker_title_placeholder')}' desc='${app.translator.trans('jeromegillard-map.forum.text_editor.marker_description_placeholder')}']${app.translator.trans('jeromegillard-map.forum.text_editor.location_placeholder')}[/map]`;\n\n    input.value = front+middle+back;\n    pos = pos + 1;\n\n    input.selectionStart = pos;\n      input.selectionEnd = pos;\n      input.focus();\n\n    })()\n\n}\n","import app from 'flarum/forum/app';\nimport { } from './leaflet.ChineseTmsProviders.js';\n\nexport function getMapConfig(o_tilesProvider, o_style, o_zoom) {\n    let tilesProvider = app.forum.attribute(\"tilesProvider\")||'osm';\n    let currentStyle;\n    let currentKey;\n    let tileLayerURL;\n    let zoom = app.forum.attribute(\"zoom\")||13;\n    let attribution;\n    let type = 'raster';\n    let subdomains = [];\n\n    if(o_tilesProvider &&\n        o_tilesProvider === 'mapbox' ||\n        o_tilesProvider === 'thunderforest' ||\n        o_tilesProvider === 'osm' ||\n        o_tilesProvider === 'gaode' ||\n        o_tilesProvider === 'tencent') {\n            tilesProvider = o_tilesProvider;\n    }\n\n    if(o_style){\n      switch(tilesProvider){\n        case 'maptiler':\n          if(o_style == 'basic-v2' ||\n              o_style == 'basic-4326' ||\n              o_style == 'bright-v2' ||\n              o_style == 'openstreetmap' ||\n              o_style == 'outdoor' ||\n              o_style == 'pastel' ||\n              o_style == 'hybrid' ||\n              o_style == 'streets-v2' ||\n              o_style == 'toner' ||\n              o_style == 'topo' ||\n              o_style == 'topographique' ||\n              o_style == 'voyager' ||\n              o_style == 'winter' ) {\n              currentStyle = o_style;\n          } else {\n            console.log(\"Unknown style\", o_style);\n          }\n          break;\n        case 'mapbox':\n            if(o_style === 'mapbox/streets-v11' ||\n                o_style === 'mapbox/outdoors-v11' ||\n                o_style === 'mapbox/light-v10' ||\n                o_style === 'mapbox/dark-v10' ||\n                o_style === 'mapbox/satellite-v9' ||\n                o_style === 'mapbox/satellite-streets-v11' ||\n                o_style === 'mapbox/navigation-day-v1' ||\n                o_style === 'mapbox/streets-v11' ||\n                o_style === 'mapbox/navigation-night-v1') {\n                currentStyle = o_style;\n            }\n            else {\n              console.log(\"Unknown style\", o_style);\n            }\n            break;\n        case 'thunderforest':\n            if(o_style === 'cycle' ||\n                o_style === 'transport' ||\n                o_style === 'landscape' ||\n                o_style === 'outdoors' ||\n                o_style === 'transport-dark9' ||\n                o_style === 'spinal-map' ||\n                o_style === 'pioneer' ||\n                o_style === 'mobile-atlas' ||\n                o_style === 'neighbourhood' ||\n                o_style === 'atlas') {\n                currentStyle = o_style;\n            }\n            else {\n              console.log(\"Unknown style\", o_style);\n            }\n            break;\n        case 'gaode':\n          if(o_style === 'Normal.Map' ||\n              o_style == 'Satellite.Map') {\n              currentStyle = o_style;\n          }\n          else {\n            console.log(\"Unknown style\", o_style);\n          }\n          break;\n        case 'tencent':\n          if((o_style === 'Normal.Map' ||\n              o_style === 'Satellite.Map' ||\n              o_style === 'Terrain.Map')) {\n            currentStyle = o_style;\n          } else {\n            console.log(\"Unknown style\", o_style);\n          }\n      }\n  }\n\n    switch(tilesProvider){\n        case \"mapbox\":\n          type = 'gl';\n          currentKey = app.forum.attribute(\"mapbox.key\")||'';\n          currentStyle = currentStyle || app.forum.attribute(\"mapbox.style\")||'mapbox/light-v9';\n          tileLayerURL = 'mapbox://styles/'+currentStyle;\n          attribution = '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>, ' +\n          '© <a href=\"https://www.mapbox.com/\">Mapbox</a>';\n          break;\n        case \"thunderforest\":\n          type: 'gl';\n          currentKey = app.forum.attribute(\"thunderforest.key\")||'';\n          currentStyle = currentStyle || app.forum.attribute(\"thunderforest.style\")||'atlas';\n          tileLayerURL = 'https://tile.thunderforest.com/{id}/{z}/{x}/{y}.png?apikey={key}';\n          attribution = '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>, ' +\n          '© <a href=\"https://www.thunderforest.com/\">Thunderforest</a>';\n          break;\n        case \"maptiler\":\n          type = 'gl';\n          currentKey = app.forum.attribute(\"maptiler.key\")||'';\n          currentStyle = currentStyle || app.forum.attribute(\"maptiler.style\")||'basic-v2';\n          tileLayerURL = 'https://api.maptiler.com/maps/'+currentStyle+'/style.json?key='+currentKey;\n          attribution = \"\\u003ca href=\\\"https://www.maptiler.com/copyright/\\\" target=\\\"_blank\\\"\\u003e\\u0026copy; MapTiler\\u003c/a\\u003e \\u003ca href=\\\"https://www.openstreetmap.org/copyright\\\" target=\\\"_blank\\\"\\u003e\\u0026copy; OpenStreetMap contributors\\u003c/a\\u003e\";\n          break;\n        case \"gaode\":\n          type = 'cn';\n          currentStyle = currentStyle || app.forum.attribute(\"tencent.style\")||'Normal.Map';\n          tileLayerURL = \"GaoDe.\" + currentStyle;\n          attribution = '&copy; <a href=\"https://www.autonavi.com\">autonavi</a>';\n          break;\n        case \"tencent\":\n          type = 'cn';\n          currentStyle = currentStyle || app.forum.attribute(\"tencent.style\")||'Normal.Map';\n          tileLayerURL = \"Tencent.\" + currentStyle;\n          attribution = '&copy; <a href=\"https://map.qq.com/\">Tencent</a>';\n          break;\n        default:\n          tileLayerURL = 'https://tile.openstreetmap.org/{z}/{x}/{y}.png';\n          attribution = '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>';\n          // tileLayerURL = 'https://{s}.tile.osm.org/{z}/{x}/{y}.png\",\n          // subdomains = ['a', 'b', 'c']\n    }\n\n\n    if(o_zoom){\n      zoom = o_zoom;\n    }\n    if(zoom < 0 || zoom > 18){\n        zoom = 13;\n    }\n    return {\"tilesProvider\": tilesProvider, \"attribution\": attribution,\"currentStyle\":\n                currentStyle, \"currentKey\": currentKey, \"tileLayerURL\": tileLayerURL,\n                \"zoom\": zoom, maxZoom: 18, tileSize: 512, zoomOffset: -1, detectRetina: true,\n                defaultLocation: [51.505, -0.09], \"type\": type, \"subdomains\": subdomains };\n  };\n\nexport function getTileLayer(mapConf){\n  //console.log(mapConf);\n  if(mapConf && mapConf.tilesProvider){\n    // Allow SVG tiles from 'gl' providers (MapTiler for instance)\n    if(mapConf.type === 'gl'){\n      return new L.mapboxGL({\n        attribution: mapConf.attribution,\n        accessToken: mapConf.currentKey,\n        style: mapConf.tileLayerURL\n      });\n    } else if(mapConf.type === 'cn'){\n      mapConf.key = mapConf.currentKey;\n      return new L.tileLayer.chinaProvider(\n        mapConf.tileLayerURL, mapConf\n        );\n    } else {\n      // Raster tiles\n      return new L.tileLayer(mapConf.tileLayerURL,\n        {\n          key: mapConf.currentKey,\n          maxZoom: mapConf.maxZoom,\n          attribution: mapConf.attribution,\n          id: mapConf.currentStyle,\n          tileSize: mapConf.tileSize,\n          zoomOffset: mapConf.zoomOffset,\n          detectRetina: mapConf.detectRetina,\n          subdomains: mapConf.subdomains\n        });\n    }\n  }\n};\n\n\nexport function createMap(pid) {\n  let so = {};\n  so.postId = pid;\n  so.mapConf = getMapConfig();\n\n  //for each gpx file in this post, loop and map\n  $('div.PostStream-item[data-id=\"'+pid+'\"] .mapFile-container, div.Pages-container .mapFile-container').each(function( i ) {\n\n    // grab the uploaded gpx file's UUID and url\n    let uuid = $(this).children('.mapFile').data('fofUploadDownloadUuid');\n    let nid = 'map-'+so.postId+i+'-'+uuid;\n    let url = app.forum.attribute('apiUrl') + '/fof/download';\n            url += '/' + uuid;\n            url += '/' + so.postId;\n            url += '/' + app.session.csrfToken;\n\n    let fileExt = $(this).children('.mapFile').data('mapUrl').split('.').pop().toLowerCase();\n\n    /*  change the template rendering to insert a new id to the map element.\n      * this allows us to have an unique div id even if a same file is displayed\n      * more than one time\n    */\n    $(this).children('.mapFile-placeholder').prop('id', nid);\n\n    // Get the map element\n    let map = L.map(nid);\n    map.addControl(new L.Control.Fullscreen());\n\n    // Set the tiles provider\n    getTileLayer(so.mapConf).addTo(map);\n\n    if(fileExt == 'gpx'){\n    // Display the GPX file in it thanks to https://github.com/mpetazzoni/leaflet-gpx\n    new L.GPX(url,\n        {\n          async: true,\n          marker_options: {\n            startIconUrl: '/assets/extensions/jeromegillard-map/pin-icon-start.png',\n            endIconUrl: '/assets/extensions/jeromegillard-map/pin-icon-end.png',\n            shadowUrl: '/assets/extensions/jeromegillard-map/pin-shadow.png',\n            wptIconUrls: {\n              '': '/assets/extensions/jeromegillard-map/default-waypoint.png',\n              'Geocache Found': '/assets/extensions/jeromegillard-map/geocache.png',\n              'Park': '/assets/extensions/jeromegillard-map/tree.png'\n            },\n          }\n        }\n      ).on('loaded', function(e) {\n      map.fitBounds(e.target.getBounds());\n      }).addTo(map);\n    }\n\n    else if(fileExt === 'json' || fileExt === 'geojson'){\n      fetch(url)\n        .then(response => response.json())\n        .then(json => {\n\n          function onEachFeature(feature, layer) {\n\n            if(feature && feature.properties){\n              var popupContent = '';\n\n              if (feature.properties.name) {\n                popupContent += feature.properties.name;\n              }\n              if (feature.properties.description) {\n                popupContent += feature.properties.description;\n              }\n\n              if (feature.properties.amenity === 'parking') {\n                // Check if feature is a polygon\n                if (feature.geometry.type === 'Polygon') {\n                  // Prepare a parking icon\n                  var parkingIcon = L.icon({\n                    iconUrl: '/assets/extensions/jeromegillard-map/pin-icon-parking.png',\n                    iconSize: [20, 20],\n                    iconAnchor: [10, 20],\n                    popupAnchor: [0, -10]\n                  });\n                  // Get bounds of polygon\n                  var bounds = layer.getBounds();\n                  // Get center of bounds\n                  var center = bounds.getCenter();\n                  // Use center to put marker on map\n                  var marker = L.marker(center,\n                    {icon: parkingIcon}\n                    ).addTo(map);\n                  }\n              }\n\n              if(popupContent !== ''){\n                layer.bindPopup(popupContent);\n              }\n            }\n          }\n\n          var geoJSONLayer = L.geoJSON([json], {\n            style: function (feature) {\n              if( feature.properties && feature.properties.colour){\n                return {\n                  color: feature.properties.colour,\n                  weight: 3,\n                  opacity: 1\n                  };\n              }\n            },\n            onEachFeature: onEachFeature,\n          }).addTo(map);\n          map.fitBounds(geoJSONLayer.getBounds());\n          });\n    }\n\n    else {\n      map.setView(so.mapConf.defaultLocation, so.mapConf.zoom);\n    }\n\n  });\n\n  // for each map location from BBCode, loop and map\n  $('div.PostStream-item[data-id=\"'+pid+'\"] .bbcode-map, div.Pages-container .bbcode-map').each(function( i ) {\n    let location = $(this).data('mapLocation');\n    let title = $(this).data('mapTitle');\n    let desc = $(this).data('mapDesc');\n    let mapConf = getMapConfig(\n      $(this).data('mapProvider'),\n      $(this).data('mapStyle'),\n      $(this).data('mapZoom')\n    )\n    //console.log(mapConf, $(this).data('mapStyle'));\n    const nid = 'map-'+Math.floor(Math.random() * 1000);\n    $(this).prop('id', nid);\n\n    if(location){\n      // resolve location as coordinates\n      fetch(`https://nominatim.openstreetmap.org/search?q=${location}&format=json`)\n        .then(response => response.json())\n        .then(json => {\n\n          // Get the map element\n          let map = L.map(nid);\n          map.addControl(new L.Control.Fullscreen());\n          // Set the tiles provider\n          getTileLayer(mapConf).addTo(map);\n          map.setView([json[0].lat, json[0].lon], mapConf.zoom);\n\n          // If there's a title or a desc, create marker and assign to map.\n          if(title || desc){\n\n            let pIcon = L.icon({\n              iconUrl: '/assets/extensions/jeromegillard-map/pin-icon-start.png',\n              iconSize: [33, 45],\n              iconAnchor: [16, 45],\n              popupAnchor: [0, -22]\n            });\n\n            let popupContent = '';\n\n            if (title) {\n              popupContent += '<strong>'+title+'</strong>';\n            }\n            if (desc) {\n              popupContent += '<br/>'+desc;\n            }\n\n            // put marker on map\n            let marker = L.marker([json[0].lat, json[0].lon], { icon: pIcon }).addTo(map);\n            if(popupContent){\n              marker.bindPopup(popupContent).openPopup();\n            }\n          }\n        });\n    }\n  });\n};\n","import Model from 'flarum/common/Model';\nimport mixin from 'flarum/common/utils/mixin';\n\nexport default class mapFile extends mixin(Model, {\n    baseName: Model.attribute('baseName'),\n    path: Model.attribute('path'),\n    url: Model.attribute('url'),\n    type: Model.attribute('type'),\n    size: Model.attribute('size'),\n    humanSize: Model.attribute('humanSize'),\n    createdAt: Model.attribute('createdAt'),\n    uuid: Model.attribute('uuid'),\n    tag: Model.attribute('tag'),\n    hidden: Model.attribute('hidden')\n}){\n\n\n    /**\n     * Use FoF Uploads endpoint\n     */\n    apiEndpoint() {\n        return '/fof/uploads' + (this.exists ? '/' + this.data.id : '');\n    }\n\n    /**\n     * Generate bbcode for this file\n     */\n    bbcode() {\n        //console.log('checking', this.tag())\n        switch (this.tag()) {\n            case 'jeromegillard-map':\n                return `[upl-file uuid=${this.uuid()} size=${this.humanSize()} url=${this.url()}]${this.baseName()}[/upl-file]`;\n            // File\n            case 'file':\n                return `[upl-file uuid=${this.uuid()} size=${this.humanSize()}]${this.baseName()}[/upl-this]`;\n\n            // Image template\n            case 'image':\n                return `[upl-image uuid=${this.uuid()} size=${this.humanSize()} url=${this.url()}]${this.baseName()}[/upl-image]`;\n\n            // Image preview\n            case 'image-preview':\n                return `[upl-image-preview url=${this.url()}]`;\n\n            // 'just-url' or unknown\n            default:\n                return this.url();\n        }\n            \n    }\n\n\n}\n","import app from 'flarum/forum/app';\nimport Post from 'flarum/components/Post';\nimport Page from 'flarum/components/Page';\nimport { extend } from 'flarum/common/extend';\nimport TextEditor from 'flarum/common/components/TextEditor';\nimport TextEditorButton from 'flarum/common/components/TextEditorButton';\nimport mapFile from './components/mapFile';\nimport insertAtCursor from './components/mapBBCode';\nimport { createMap, getMapConfig, getTileLayer } from './components/mapConfigHelper';\n\napp.initializers.add('jeromegillard/osm', () => {\n  app.store.models.files = mapFile;\n\n  extend(TextEditor.prototype, 'toolbarItems', function (items) {\n    let mapConf = getMapConfig();\n    items.add(\n      'bbcode',\n      <TextEditorButton onclick={() => insertAtCursor(mapConf.tilesProvider, mapConf.currentStyle, mapConf.zoom)} icon={'fas fa-map'}>\n        {app.translator.trans('jeromegillard-map.forum.text_editor.bbcode_tooltip')}\n      </TextEditorButton>\n    );\n  });\n\n});\n\n// Render maps in posts\nextend(Post.prototype, 'oncreate', function(){\n  createMap(this.attrs.post.id());\n});\n\n// Render maps in pages (fof/pages)\nextend(Page.prototype, 'oncreate', function(){\n  const pid = this.attrs.id;\n  if(this.attrs.routeName === 'page'){\n    // Wait for the post to be rendered. Anyone has a better event?\n    // With fof/links, when a user browse from a post to the page, there's no event triggered\n    setTimeout(createMap, 500, pid);\n  }\n});\n","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/app'];","module.exports = flarum.core.compat['common/components/TextEditor'];","module.exports = flarum.core.compat['common/components/TextEditorButton'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/utils/mixin'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/Post'];","module.exports = flarum.core.compat['forum/app'];","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nfunction _regeneratorRuntime() {\n  \"use strict\";\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) {\n            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n          }\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\n\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/common';\nexport * from './src/forum';\n"],"names":["app","initializers","add","console","log","L","Proj","CRS","Baidu","resolutions","level","res","Math","pow","i","origin","bounds","TileLayer","ChinaProvider","extend","initialize","type","options","providers","parts","split","providerName","mapName","mapType","url","subdomains","Subdomains","key","tms","prototype","call","getTileUrl","coords","data","s","_getSubdomain","x","y","z","_getZoomForUrl","_map","crs","infinite","invertedY","_globalTileRange","max","sx","sy","Util","template","_url","TianDiTu","Normal","Map","Annotion","Satellite","Terrain","GaoDe","Google","Geoq","PurplishBlue","Gray","Warm","Theme","Hydro","OSM","Tencent","tileLayer","chinaProvider","insertAtCursor","tilesProvider","style","zoom","input","document","querySelector","pos","selectionStart","front","value","substring","back","length","middle","translator","trans","selectionEnd","focus","getMapConfig","o_tilesProvider","o_style","o_zoom","forum","attribute","currentStyle","currentKey","tileLayerURL","attribution","maxZoom","tileSize","zoomOffset","detectRetina","defaultLocation","getTileLayer","mapConf","mapboxGL","accessToken","id","createMap","pid","so","postId","$","each","uuid","children","nid","session","csrfToken","fileExt","pop","toLowerCase","prop","map","addControl","Control","Fullscreen","addTo","GPX","async","marker_options","startIconUrl","endIconUrl","shadowUrl","wptIconUrls","on","e","fitBounds","target","getBounds","fetch","then","response","json","onEachFeature","feature","layer","properties","popupContent","name","description","amenity","geometry","parkingIcon","icon","iconUrl","iconSize","iconAnchor","popupAnchor","center","getCenter","marker","bindPopup","geoJSONLayer","geoJSON","colour","color","weight","opacity","setView","location","title","desc","floor","random","lat","lon","pIcon","openPopup","Model","mixin","mapFile","apiEndpoint","exists","bbcode","tag","humanSize","baseName","path","size","createdAt","hidden","Post","Page","TextEditor","TextEditorButton","store","models","files","items","attrs","post","routeName","setTimeout","_typeof","require","_regeneratorRuntime","module","exports","__esModule","Op","Object","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","arg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","done","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","undefined","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","constructor","mark","setPrototypeOf","__proto__","awrap","Promise","iter","keys","object","reverse","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","_catch","thrown","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","_inheritsLoose","subClass","superClass","_setPrototypeOf","o","p","bind"],"sourceRoot":""}