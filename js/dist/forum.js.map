{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@jeromegillard/map/./src/forum/components/leaflet.ChineseTmsProviders.js","webpack://@jeromegillard/map/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@jeromegillard/map/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@jeromegillard/map/./node_modules/@babel/runtime/regenerator/index.js","webpack://@jeromegillard/map/webpack/bootstrap","webpack://@jeromegillard/map/webpack/runtime/compat get default export","webpack://@jeromegillard/map/webpack/runtime/define property getters","webpack://@jeromegillard/map/webpack/runtime/hasOwnProperty shorthand","webpack://@jeromegillard/map/webpack/runtime/make namespace object","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/app']\"","webpack://@jeromegillard/map/./src/common/index.ts","webpack://@jeromegillard/map/external root \"flarum.core.compat['forum/app']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['components/Post']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['components/Page']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/extend']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/components/TextEditor']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/components/TextEditorButton']\"","webpack://@jeromegillard/map/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/Model']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/utils/mixin']\"","webpack://@jeromegillard/map/./src/forum/components/mapFile.js","webpack://@jeromegillard/map/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@jeromegillard/map/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@jeromegillard/map/./src/forum/components/mapConfigHelper.js","webpack://@jeromegillard/map/./src/forum/index.js","webpack://@jeromegillard/map/./src/forum/components/mapBBCode.js"],"sourcesContent":["// this L.CRS.Baidu from https://github.com/muyao1987/leaflet-tileLayer-baidugaode/blob/master/src/tileLayer.baidu.js\n\nif (L.Proj) {\n  L.CRS.Baidu = new L.Proj.CRS('EPSG:900913', '+proj=merc +a=6378206 +b=6356584.314245179 +lat_ts=0.0 +lon_0=0.0 +x_0=0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs', {\n      resolutions: function () {\n          var level = 19\n          var res = [];\n          res[0] = Math.pow(2, 18);\n          for (var i = 1; i < level; i++) {\n              res[i] = Math.pow(2, (18 - i))\n          }\n          return res;\n      }(),\n      origin: [0, 0],\n      bounds: L.bounds([20037508.342789244, 0], [0, 20037508.342789244])\n  });\n}\n\nL.TileLayer.ChinaProvider = L.TileLayer.extend({\n\n  initialize: function(type, options) { // (type, Object)\n      var providers = L.TileLayer.ChinaProvider.providers;\n\n      options = options || {}\n\n      var parts = type.split('.');\n\n      var providerName = parts[0];\n      var mapName = parts[1];\n      var mapType = parts[2];\n\n      var url = providers[providerName][mapName][mapType];\n      options.subdomains = providers[providerName].Subdomains;\n      options.key = options.key || providers[providerName].key;\n\n      if ('tms' in providers[providerName]) {\n          options.tms = providers[providerName]['tms']\n      }\n\n      L.TileLayer.prototype.initialize.call(this, url, options);\n  },\n\n  getTileUrl: function (coords) {\n  var data = {\n    s: this._getSubdomain(coords),\n    x: coords.x,\n    y: coords.y,\n    z: this._getZoomForUrl(),\n  };\n  if (this._map && !this._map.options.crs.infinite) {\n    var invertedY = this._globalTileRange.max.y - coords.y;\n    if (this.options.tms) {\n      data['y'] = invertedY;\n    }\n    data['-y'] = invertedY;\n  }\n\n      data.sx = data.x >> 4\n      data.sy = (( 1 << data.z) - data.y) >> 4\n\n  return L.Util.template(this._url, L.Util.extend(data, this.options));\n},\n});\n\nL.TileLayer.ChinaProvider.providers = {\n  TianDiTu: {\n      Normal: {\n          Map: \"//t{s}.tianditu.gov.cn/DataServer?T=vec_w&X={x}&Y={y}&L={z}&tk={key}\",\n          Annotion: \"//t{s}.tianditu.gov.cn/DataServer?T=cva_w&X={x}&Y={y}&L={z}&tk={key}\"\n      },\n      Satellite: {\n          Map: \"//t{s}.tianditu.gov.cn/DataServer?T=img_w&X={x}&Y={y}&L={z}&tk={key}\",\n          Annotion: \"//t{s}.tianditu.gov.cn/DataServer?T=cia_w&X={x}&Y={y}&L={z}&tk={key}\"\n      },\n      Terrain: {\n          Map: \"//t{s}.tianditu.gov.cn/DataServer?T=ter_w&X={x}&Y={y}&L={z}&tk={key}\",\n          Annotion: \"//t{s}.tianditu.gov.cn/DataServer?T=cta_w&X={x}&Y={y}&L={z}&tk={key}\"\n      },\n      Subdomains: ['0', '1', '2', '3', '4', '5', '6', '7'],\n      key: \"174705aebfe31b79b3587279e211cb9a\"\n  },\n\n  GaoDe: {\n      Normal: {\n          Map: '//webrd0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}'\n      },\n      Satellite: {\n          Map: '//webst0{s}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}',\n          Annotion: '//webst0{s}.is.autonavi.com/appmaptile?style=8&x={x}&y={y}&z={z}'\n      },\n      Subdomains: [\"1\", \"2\", \"3\", \"4\"]\n  },\n\n  Google: {\n      Normal: {\n          Map: \"//www.google.cn/maps/vt?lyrs=m@189&gl=cn&x={x}&y={y}&z={z}\"\n      },\n      Satellite: {\n          Map: \"//www.google.cn/maps/vt?lyrs=s@189&gl=cn&x={x}&y={y}&z={z}\",\n          Annotion: \"//www.google.cn/maps/vt?lyrs=y@189&gl=cn&x={x}&y={y}&z={z}\"\n      },\n      Subdomains: []\n  },\n\n  Geoq: {\n      Normal: {\n          Map: \"//map.geoq.cn/ArcGIS/rest/services/ChinaOnlineCommunity/MapServer/tile/{z}/{y}/{x}\",\n          PurplishBlue: \"//map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}\",\n          Gray: \"//map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetGray/MapServer/tile/{z}/{y}/{x}\",\n          Warm: \"//map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetWarm/MapServer/tile/{z}/{y}/{x}\",\n      },\n      Theme: {\n          Hydro: \"//thematic.geoq.cn/arcgis/rest/services/ThematicMaps/WorldHydroMap/MapServer/tile/{z}/{y}/{x}\"\n      },\n      Subdomains: []\n  },\n\n  OSM: {\n      Normal: {\n          Map: \"//{s}.tile.osm.org/{z}/{x}/{y}.png\",\n      },\n      Subdomains: ['a', 'b', 'c']\n  },\n\n  Baidu: {\n      Normal: {\n          Map: '//online{s}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles=pl&scaler=1&p=1'\n      },\n      Satellite: {\n          Map: '//shangetu{s}.map.bdimg.com/it/u=x={x};y={y};z={z};v=009;type=sate&fm=46',\n          Annotion: '//online{s}.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles=sl&v=020'\n      },\n      Subdomains: '0123456789',\n      tms: true\n  },\n\n  Tencent: {\n      Normal: {\n          Map: \"//rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={-y}&type=vector&styleid=3\",\n      },\n      Satellite: {\n          Map: \"//p{s}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{-y}.jpg\",\n      },\n      Terrain: {\n          Map: \"//p{s}.map.gtimg.com/demTiles/{z}/{sx}/{sy}/{x}_{-y}.jpg\"\n      },\n      Subdomains: '0123',\n  }\n\n};\n\nL.tileLayer.chinaProvider = function(type, options) {\n  return new L.TileLayer.ChinaProvider(type, options);\n};\n","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nfunction _regeneratorRuntime() {\n  \"use strict\";\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) {\n            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n          }\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\n\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","import app from 'flarum/common/app';\n\napp.initializers.add('jeromegillard/osm', () => {\n  console.log('[jeromegillard/osm] Hello, forum and admin!');\n});\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Post'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['components/Page'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/TextEditor'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/TextEditorButton'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/mixin'];","import Model from 'flarum/common/Model';\nimport mixin from 'flarum/common/utils/mixin';\n\nexport default class mapFile extends mixin(Model, {\n    baseName: Model.attribute('baseName'),\n    path: Model.attribute('path'),\n    url: Model.attribute('url'),\n    type: Model.attribute('type'),\n    size: Model.attribute('size'),\n    humanSize: Model.attribute('humanSize'),\n    createdAt: Model.attribute('createdAt'),\n    uuid: Model.attribute('uuid'),\n    tag: Model.attribute('tag'),\n    hidden: Model.attribute('hidden')\n}){\n\n\n    /**\n     * Use FoF Uploads endpoint\n     */\n    apiEndpoint() {\n        return '/fof/uploads' + (this.exists ? '/' + this.data.id : '');\n    }\n\n    /**\n     * Generate bbcode for this file\n     */\n    bbcode() {\n        //console.log('checking', this.tag())\n        switch (this.tag()) {\n            case 'jeromegillard-map':\n                return `[upl-file uuid=${this.uuid()} size=${this.humanSize()} url=${this.url()}]${this.baseName()}[/upl-file]`;\n            // File\n            case 'file':\n                return `[upl-file uuid=${this.uuid()} size=${this.humanSize()}]${this.baseName()}[/upl-this]`;\n\n            // Image template\n            case 'image':\n                return `[upl-image uuid=${this.uuid()} size=${this.humanSize()} url=${this.url()}]${this.baseName()}[/upl-image]`;\n\n            // Image preview\n            case 'image-preview':\n                return `[upl-image-preview url=${this.url()}]`;\n\n            // 'just-url' or unknown\n            default:\n                return this.url();\n        }\n            \n    }\n\n\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import app from 'flarum/forum/app';\nimport { } from './leaflet.ChineseTmsProviders.js';\n\nexport function getMapConfig(o_tilesProvider, o_style, o_zoom) {\n    let tilesProvider = app.forum.attribute(\"tilesProvider\")||'osm';\n    let currentStyle;\n    let currentKey;\n    let tileLayerURL;\n    let zoom = app.forum.attribute(\"zoom\")||13;\n    let attribution;\n    let type = 'raster';\n    let subdomains = [];\n\n    if(o_tilesProvider &&\n        o_tilesProvider === 'mapbox' ||\n        o_tilesProvider === 'thunderforest' ||\n        o_tilesProvider === 'osm' ||\n        o_tilesProvider === 'gaode' ||\n        o_tilesProvider === 'tencent') {\n            tilesProvider = o_tilesProvider;\n    }\n\n    if(o_style){\n      switch(tilesProvider){\n        case 'maptiler':\n          if(o_style == 'basic-v2' ||\n              o_style == 'basic-4326' ||\n              o_style == 'bright-v2' ||\n              o_style == 'openstreetmap' ||\n              o_style == 'outdoor' ||\n              o_style == 'pastel' ||\n              o_style == 'hybrid' ||\n              o_style == 'streets-v2' ||\n              o_style == 'toner' ||\n              o_style == 'topo' ||\n              o_style == 'topographique' ||\n              o_style == 'voyager' ||\n              o_style == 'winter' ) {\n              currentStyle = o_style;\n          } else {\n            console.log(\"Unknown style\", o_style);\n          }\n          break;\n        case 'mapbox':\n            if(o_style === 'mapbox/streets-v11' ||\n                o_style === 'mapbox/outdoors-v11' ||\n                o_style === 'mapbox/light-v10' ||\n                o_style === 'mapbox/dark-v10' ||\n                o_style === 'mapbox/satellite-v9' ||\n                o_style === 'mapbox/satellite-streets-v11' ||\n                o_style === 'mapbox/navigation-day-v1' ||\n                o_style === 'mapbox/streets-v11' ||\n                o_style === 'mapbox/navigation-night-v1') {\n                currentStyle = o_style;\n            }\n            else {\n              console.log(\"Unknown style\", o_style);\n            }\n            break;\n        case 'thunderforest':\n            if(o_style === 'cycle' ||\n                o_style === 'transport' ||\n                o_style === 'landscape' ||\n                o_style === 'outdoors' ||\n                o_style === 'transport-dark9' ||\n                o_style === 'spinal-map' ||\n                o_style === 'pioneer' ||\n                o_style === 'mobile-atlas' ||\n                o_style === 'neighbourhood' ||\n                o_style === 'atlas') {\n                currentStyle = o_style;\n            }\n            else {\n              console.log(\"Unknown style\", o_style);\n            }\n            break;\n        case 'gaode':\n          if(o_style === 'Normal.Map' ||\n              o_style == 'Satellite.Map') {\n              currentStyle = o_style;\n          }\n          else {\n            console.log(\"Unknown style\", o_style);\n          }\n          break;\n        case 'tencent':\n          if((o_style === 'Normal.Map' ||\n              o_style === 'Satellite.Map' ||\n              o_style === 'Terrain.Map')) {\n            currentStyle = o_style;\n          } else {\n            console.log(\"Unknown style\", o_style);\n          }\n      }\n  }\n\n    switch(tilesProvider){\n        case \"mapbox\":\n          type = 'gl';\n          currentKey = app.forum.attribute(\"mapbox.key\")||'';\n          currentStyle = currentStyle || app.forum.attribute(\"mapbox.style\")||'mapbox/light-v9';\n          tileLayerURL = 'mapbox://styles/'+currentStyle;\n          attribution = '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>, ' +\n          ' <a href=\"https://www.mapbox.com/\">Mapbox</a>';\n          break;\n        case \"thunderforest\":\n          type: 'gl';\n          currentKey = app.forum.attribute(\"thunderforest.key\")||'';\n          currentStyle = currentStyle || app.forum.attribute(\"thunderforest.style\")||'atlas';\n          tileLayerURL = 'https://tile.thunderforest.com/{id}/{z}/{x}/{y}.png?apikey={key}';\n          attribution = '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>, ' +\n          ' <a href=\"https://www.thunderforest.com/\">Thunderforest</a>';\n          break;\n        case \"maptiler\":\n          type = 'gl';\n          currentKey = app.forum.attribute(\"maptiler.key\")||'';\n          currentStyle = currentStyle || app.forum.attribute(\"maptiler.style\")||'basic-v2';\n          tileLayerURL = 'https://api.maptiler.com/maps/'+currentStyle+'/style.json?key='+currentKey;\n          attribution = \"\\u003ca href=\\\"https://www.maptiler.com/copyright/\\\" target=\\\"_blank\\\"\\u003e\\u0026copy; MapTiler\\u003c/a\\u003e \\u003ca href=\\\"https://www.openstreetmap.org/copyright\\\" target=\\\"_blank\\\"\\u003e\\u0026copy; OpenStreetMap contributors\\u003c/a\\u003e\";\n          break;\n        case \"gaode\":\n          type = 'cn';\n          currentStyle = currentStyle || app.forum.attribute(\"tencent.style\")||'Normal.Map';\n          tileLayerURL = \"GaoDe.\" + currentStyle;\n          attribution = '&copy; <a href=\"https://www.autonavi.com\">autonavi</a>';\n          break;\n        case \"tencent\":\n          type = 'cn';\n          currentStyle = currentStyle || app.forum.attribute(\"tencent.style\")||'Normal.Map';\n          tileLayerURL = \"Tencent.\" + currentStyle;\n          attribution = '&copy; <a href=\"https://map.qq.com/\">Tencent</a>';\n          break;\n        default:\n          tileLayerURL = 'https://tile.openstreetmap.org/{z}/{x}/{y}.png';\n          attribution = '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>';\n          // tileLayerURL = 'https://{s}.tile.osm.org/{z}/{x}/{y}.png\",\n          // subdomains = ['a', 'b', 'c']\n    }\n\n\n    if(o_zoom){\n      zoom = o_zoom;\n    }\n    if(zoom < 0 || zoom > 18){\n        zoom = 13;\n    }\n    return {\"tilesProvider\": tilesProvider, \"attribution\": attribution,\"currentStyle\":\n                currentStyle, \"currentKey\": currentKey, \"tileLayerURL\": tileLayerURL,\n                \"zoom\": zoom, maxZoom: 18, tileSize: 512, zoomOffset: -1, detectRetina: true,\n                defaultLocation: [51.505, -0.09], \"type\": type, \"subdomains\": subdomains };\n  };\n\nexport function getTileLayer(mapConf){\n  //console.log(mapConf);\n  if(mapConf && mapConf.tilesProvider){\n    // Allow SVG tiles from 'gl' providers (MapTiler for instance)\n    if(mapConf.type === 'gl'){\n      return new L.mapboxGL({\n        attribution: mapConf.attribution,\n        accessToken: mapConf.currentKey,\n        style: mapConf.tileLayerURL\n      });\n    } else if(mapConf.type === 'cn'){\n      mapConf.key = mapConf.currentKey;\n      return new L.tileLayer.chinaProvider(\n        mapConf.tileLayerURL, mapConf\n        );\n    } else {\n      // Raster tiles\n      return new L.tileLayer(mapConf.tileLayerURL,\n        {\n          key: mapConf.currentKey,\n          maxZoom: mapConf.maxZoom,\n          attribution: mapConf.attribution,\n          id: mapConf.currentStyle,\n          tileSize: mapConf.tileSize,\n          zoomOffset: mapConf.zoomOffset,\n          detectRetina: mapConf.detectRetina,\n          subdomains: mapConf.subdomains\n        });\n    }\n  }\n};\n\n\nexport function createMap(pid) {\n  let so = {};\n  so.postId = pid;\n  so.mapConf = getMapConfig();\n\n  //for each gpx file in this post, loop and map\n  $('div.PostStream-item[data-id=\"'+pid+'\"] .mapFile-container, div.Pages-container .mapFile-container').each(function( i ) {\n\n    // grab the uploaded gpx file's UUID and url\n    let uuid = $(this).children('.mapFile').data('fofUploadDownloadUuid');\n    let nid = 'map-'+so.postId+i+'-'+uuid;\n    let url = app.forum.attribute('apiUrl') + '/fof/download';\n            url += '/' + uuid;\n            url += '/' + so.postId;\n            url += '/' + app.session.csrfToken;\n\n    let fileExt = $(this).children('.mapFile').data('mapUrl').split('.').pop().toLowerCase();\n\n    /*  change the template rendering to insert a new id to the map element.\n      * this allows us to have an unique div id even if a same file is displayed\n      * more than one time\n    */\n    $(this).children('.mapFile-placeholder').prop('id', nid);\n\n    // Get the map element\n    let map = L.map(nid);\n    map.addControl(new L.Control.Fullscreen());\n\n    // Set the tiles provider\n    getTileLayer(so.mapConf).addTo(map);\n\n    if(fileExt == 'gpx'){\n    // Display the GPX file in it thanks to https://github.com/mpetazzoni/leaflet-gpx\n    new L.GPX(url,\n        {\n          async: true,\n          marker_options: {\n            startIconUrl: '/assets/extensions/jeromegillard-map/pin-icon-start.png',\n            endIconUrl: '/assets/extensions/jeromegillard-map/pin-icon-end.png',\n            shadowUrl: '/assets/extensions/jeromegillard-map/pin-shadow.png',\n            wptIconUrls: {\n              '': '/assets/extensions/jeromegillard-map/default-waypoint.png',\n              'Geocache Found': '/assets/extensions/jeromegillard-map/geocache.png',\n              'Park': '/assets/extensions/jeromegillard-map/tree.png'\n            },\n          }\n        }\n      ).on('loaded', function(e) {\n      map.fitBounds(e.target.getBounds());\n      }).addTo(map);\n    }\n\n    else if(fileExt === 'json' || fileExt === 'geojson'){\n      fetch(url)\n        .then(response => response.json())\n        .then(json => {\n\n          function onEachFeature(feature, layer) {\n\n            if(feature && feature.properties){\n              var popupContent = '';\n\n              if (feature.properties.name) {\n                popupContent += feature.properties.name;\n              }\n              if (feature.properties.description) {\n                popupContent += feature.properties.description;\n              }\n\n              if (feature.properties.amenity === 'parking') {\n                // Check if feature is a polygon\n                if (feature.geometry.type === 'Polygon') {\n                  // Prepare a parking icon\n                  var parkingIcon = L.icon({\n                    iconUrl: '/assets/extensions/jeromegillard-map/pin-icon-parking.png',\n                    iconSize: [20, 20],\n                    iconAnchor: [10, 20],\n                    popupAnchor: [0, -10]\n                  });\n                  // Get bounds of polygon\n                  var bounds = layer.getBounds();\n                  // Get center of bounds\n                  var center = bounds.getCenter();\n                  // Use center to put marker on map\n                  var marker = L.marker(center,\n                    {icon: parkingIcon}\n                    ).addTo(map);\n                  }\n              }\n\n              if(popupContent !== ''){\n                layer.bindPopup(popupContent);\n              }\n            }\n          }\n\n          var geoJSONLayer = L.geoJSON([json], {\n            style: function (feature) {\n              if( feature.properties && feature.properties.colour){\n                return {\n                  color: feature.properties.colour,\n                  weight: 3,\n                  opacity: 1\n                  };\n              }\n            },\n            onEachFeature: onEachFeature,\n          }).addTo(map);\n          map.fitBounds(geoJSONLayer.getBounds());\n          });\n    }\n\n    else {\n      map.setView(so.mapConf.defaultLocation, so.mapConf.zoom);\n    }\n\n  });\n\n  // for each map location from BBCode, loop and map\n  $('div.PostStream-item[data-id=\"'+pid+'\"] .bbcode-map, div.Pages-container .bbcode-map').each(function( i ) {\n    let location = $(this).data('mapLocation');\n    let title = $(this).data('mapTitle');\n    let desc = $(this).data('mapDesc');\n    let mapConf = getMapConfig(\n      $(this).data('mapProvider'),\n      $(this).data('mapStyle'),\n      $(this).data('mapZoom')\n    )\n    //console.log(mapConf, $(this).data('mapStyle'));\n    const nid = 'map-'+Math.floor(Math.random() * 1000);\n    $(this).prop('id', nid);\n\n    if(location){\n      // resolve location as coordinates\n      fetch(`https://nominatim.openstreetmap.org/search?q=${location}&format=json`)\n        .then(response => response.json())\n        .then(json => {\n\n          // Get the map element\n          let map = L.map(nid);\n          map.addControl(new L.Control.Fullscreen());\n          // Set the tiles provider\n          getTileLayer(mapConf).addTo(map);\n          map.setView([json[0].lat, json[0].lon], mapConf.zoom);\n\n          // If there's a title or a desc, create marker and assign to map.\n          if(title || desc){\n\n            let pIcon = L.icon({\n              iconUrl: '/assets/extensions/jeromegillard-map/pin-icon-start.png',\n              iconSize: [33, 45],\n              iconAnchor: [16, 45],\n              popupAnchor: [0, -22]\n            });\n\n            let popupContent = '';\n\n            if (title) {\n              popupContent += '<strong>'+title+'</strong>';\n            }\n            if (desc) {\n              popupContent += '<br/>'+desc;\n            }\n\n            // put marker on map\n            let marker = L.marker([json[0].lat, json[0].lon], { icon: pIcon }).addTo(map);\n            if(popupContent){\n              marker.bindPopup(popupContent).openPopup();\n            }\n          }\n        });\n    }\n  });\n};\n","import app from 'flarum/forum/app';\nimport Post from 'flarum/components/Post';\nimport Page from 'flarum/components/Page';\nimport { extend } from 'flarum/common/extend';\nimport TextEditor from 'flarum/common/components/TextEditor';\nimport TextEditorButton from 'flarum/common/components/TextEditorButton';\nimport mapFile from './components/mapFile';\nimport insertAtCursor from './components/mapBBCode';\nimport { createMap, getMapConfig, getTileLayer } from './components/mapConfigHelper';\n\napp.initializers.add('jeromegillard/osm', () => {\n  app.store.models.files = mapFile;\n\n  extend(TextEditor.prototype, 'toolbarItems', function (items) {\n    let mapConf = getMapConfig();\n    items.add(\n      'bbcode',\n      <TextEditorButton onclick={() => insertAtCursor(mapConf.tilesProvider, mapConf.currentStyle, mapConf.zoom)} icon={'fas fa-map'}>\n        {app.translator.trans('jeromegillard-map.forum.text_editor.bbcode_tooltip')}\n      </TextEditorButton>\n    );\n  });\n\n});\n\n// Render maps in posts\nextend(Post.prototype, 'oncreate', function(){\n  createMap(this.attrs.post.id());\n});\n\n// Render maps in pages (fof/pages)\nextend(Page.prototype, 'oncreate', function(){\n  const pid = this.attrs.id;\n  if(this.attrs.routeName === 'page'){\n    // Wait for the post to be rendered. Anyone has a better event?\n    // With fof/links, when a user browse from a post to the page, there's no event triggered\n    setTimeout(createMap, 500, pid);\n  }\n});\n","export default function insertAtCursor(tilesProvider, style, zoom) {\n\n  (async () => {\n\n    let input = document.querySelector('textarea.FormControl');\n\n    let pos = input.selectionStart\n    let front = (input.value).substring(0, pos);\n    let back = (input.value).substring(pos, input.value.length);\n    let middle = `[map provider=${tilesProvider??'osm'} style=${style??'street'} zoom=${zoom??13} title='${app.translator.trans('jeromegillard-map.forum.text_editor.marker_title_placeholder')}' desc='${app.translator.trans('jeromegillard-map.forum.text_editor.marker_description_placeholder')}']${app.translator.trans('jeromegillard-map.forum.text_editor.location_placeholder')}[/map]`;\n\n    input.value = front+middle+back;\n    pos = pos + 1;\n\n    input.selectionStart = pos;\n      input.selectionEnd = pos;\n      input.focus();\n\n    })()\n\n}\n"],"names":["L","Proj","CRS","Baidu","resolutions","res","Math","pow","i","origin","bounds","TileLayer","ChinaProvider","extend","initialize","type","options","providers","parts","split","providerName","mapName","mapType","url","subdomains","Subdomains","key","tms","prototype","call","this","getTileUrl","coords","data","s","_getSubdomain","x","y","z","_getZoomForUrl","_map","crs","infinite","invertedY","_globalTileRange","max","sx","sy","Util","template","_url","TianDiTu","Normal","Map","Annotion","Satellite","Terrain","GaoDe","Google","Geoq","PurplishBlue","Gray","Warm","Theme","Hydro","OSM","Tencent","tileLayer","chinaProvider","_typeof","require","_regeneratorRuntime","module","exports","__esModule","Op","Object","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","arg","Error","undefined","done","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","doneResult","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","d","a","definition","o","get","prop","r","flarum","core","compat","app","console","log","_setPrototypeOf","p","bind","mapFile","subClass","superClass","apiEndpoint","exists","id","bbcode","tag","uuid","humanSize","baseName","mixin","Model","path","size","createdAt","hidden","asyncGeneratorStep","gen","_next","_throw","getMapConfig","o_tilesProvider","o_style","o_zoom","currentStyle","currentKey","tileLayerURL","attribution","tilesProvider","zoom","maxZoom","tileSize","zoomOffset","detectRetina","defaultLocation","getTileLayer","mapConf","mapboxGL","accessToken","style","createMap","pid","so","postId","$","each","children","nid","fileExt","toLowerCase","map","addControl","Control","Fullscreen","addTo","GPX","marker_options","startIconUrl","endIconUrl","shadowUrl","wptIconUrls","on","e","fitBounds","target","getBounds","fetch","response","json","geoJSONLayer","geoJSON","feature","properties","colour","color","weight","opacity","onEachFeature","layer","popupContent","description","amenity","geometry","parkingIcon","icon","iconUrl","iconSize","iconAnchor","popupAnchor","center","getCenter","marker","bindPopup","setView","location","title","desc","floor","random","lat","lon","pIcon","openPopup","TextEditor","items","add","onclick","input","document","querySelector","pos","selectionStart","front","substring","back","middle","translator","trans","selectionEnd","focus","args","arguments","apply","Post","attrs","post","Page","routeName","setTimeout"],"sourceRoot":""}