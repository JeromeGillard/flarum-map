{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@jeromegillard/map/./src/common/index.ts","webpack://@jeromegillard/map/./src/forum/components/mapBBCode.js","webpack://@jeromegillard/map/./src/forum/components/mapConfigHelper.js","webpack://@jeromegillard/map/./src/forum/components/mapFile.js","webpack://@jeromegillard/map/./src/forum/index.js","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/Model']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/app']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/components/TextEditor']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/components/TextEditorButton']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/extend']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['common/utils/mixin']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['components/Page']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['components/Post']\"","webpack://@jeromegillard/map/external root \"flarum.core.compat['forum/app']\"","webpack://@jeromegillard/map/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@jeromegillard/map/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@jeromegillard/map/./node_modules/@babel/runtime/regenerator/index.js","webpack://@jeromegillard/map/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@jeromegillard/map/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@jeromegillard/map/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@jeromegillard/map/webpack/bootstrap","webpack://@jeromegillard/map/webpack/runtime/compat get default export","webpack://@jeromegillard/map/webpack/runtime/define property getters","webpack://@jeromegillard/map/webpack/runtime/hasOwnProperty shorthand","webpack://@jeromegillard/map/webpack/runtime/make namespace object","webpack://@jeromegillard/map/./forum.ts"],"sourcesContent":["import app from 'flarum/common/app';\n\napp.initializers.add('jeromegillard/osm', () => {\n  console.log('[jeromegillard/osm] Hello, forum and admin!');\n});\n","export default function insertAtCursor(tilesProvider, style, zoom) {\n\n  (async () => {\n\n    let input = document.querySelector('textarea.FormControl');\n\n    let pos = input.selectionStart\n    let front = (input.value).substring(0, pos);\n    let back = (input.value).substring(pos, input.value.length);\n    let middle = `[map provider=${tilesProvider??'osm'} style=${style??'street'} zoom=${zoom??13}]${app.translator.trans('jeromegillard-map.forum.text_editor.location_placeholder')}[/map]`;\n\n    input.value = front+middle+back;\n    pos = pos + 1;\n\n    input.selectionStart = pos;\n      input.selectionEnd = pos;\n      input.focus();\n\n    })()\n\n}\n","import app from 'flarum/forum/app';\n\nexport function getMapConfig(o_tilesProvider, o_style, o_zoom) {\n    let tilesProvider = app.forum.attribute(\"tilesProvider\")||'osm';\n    let currentStyle;\n    let currentKey;\n    let tileLayerURL;\n    let zoom = app.forum.attribute(\"zoom\")||13;\n    let attribution;\n    let type = 'raster';\n\n    if(o_tilesProvider &&\n        o_tilesProvider === 'mapbox' ||\n        o_tilesProvider === 'thunderforest' ||\n        o_tilesProvider === 'osm') {\n            tilesProvider = o_tilesProvider;\n    }\n\n    switch(tilesProvider){\n        case \"mapbox\":\n          currentKey = app.forum.attribute(\"mapbox.key\")||'';\n          currentStyle = app.forum.attribute(\"mapbox.style\")||'mapbox/light-v9';\n          tileLayerURL = 'https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}@2x?access_token={key}';\n          attribution = '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>, ' +\n          '© <a href=\"https://www.mapbox.com/\">Mapbox</a>';\n          break;\n        case \"thunderforest\":\n          currentKey = app.forum.attribute(\"thunderforest.key\")||'';\n          currentStyle = app.forum.attribute(\"thunderforest.style\")||'atlas';\n          tileLayerURL = 'https://tile.thunderforest.com/{id}/{z}/{x}/{y}.png?apikey={key}';\n          attribution = '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>, ' +\n          '© <a href=\"https://www.thunderforest.com/\">Thunderforest</a>';\n          break;\n        case \"maptiler\":\n          type = 'gl';\n          currentKey = app.forum.attribute(\"maptiler.key\")||'';\n          currentStyle = app.forum.attribute(\"maptiler.style\")||'basic-v2';\n          tileLayerURL = 'https://api.maptiler.com/maps/'+currentStyle+'/style.json?key='+currentKey;\n          attribution = \"\\u003ca href=\\\"https://www.maptiler.com/copyright/\\\" target=\\\"_blank\\\"\\u003e\\u0026copy; MapTiler\\u003c/a\\u003e \\u003ca href=\\\"https://www.openstreetmap.org/copyright\\\" target=\\\"_blank\\\"\\u003e\\u0026copy; OpenStreetMap contributors\\u003c/a\\u003e\";\n          break;\n        default:\n          tileLayerURL = 'https://tile.openstreetmap.org/{z}/{x}/{y}.png';\n          attribution = '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>';\n      }\n\n    if(o_style){\n        switch(tilesProvider){\n            case 'mapbox':\n                if(o_style === 'mapbox/streets-v11' ||\n                    o_style === 'mapbox/outdoors-v11' ||\n                    o_style === 'mapbox/light-v10' ||\n                    o_style === 'mapbox/dark-v10' ||\n                    o_style === 'mapbox/satellite-v9' ||\n                    o_style === 'mapbox/satellite-streets-v11' ||\n                    o_style === 'mapbox/navigation-day-v1' ||\n                    o_style === 'mapbox/streets-v11' ||\n                    o_style === 'mapbox/navigation-night-v1') {\n                        currentStyle = o_style;\n                    }\n                break;\n            case 'thunderforest':\n                if(o_style === 'cycle' ||\n                    o_style === 'transport' ||\n                    o_style === 'landscape' ||\n                    o_style === 'outdoors' ||\n                    o_style === 'transport-dark9' ||\n                    o_style === 'spinal-map' ||\n                    o_style === 'pioneer' ||\n                    o_style === 'mobile-atlas' ||\n                    o_style === 'neighbourhood' ||\n                    o_style === 'atlas') {\n                        currentStyle = o_style;\n                    }\n                break;\n        }\n    }\n\n\n    if(o_zoom){\n      zoom = o_zoom;\n    }\n    if(zoom < 0 || zoom > 18){\n        zoom = 13;\n    }\n    return {\"tilesProvider\": tilesProvider, \"attribution\": attribution,\"currentStyle\":\n                currentStyle, \"currentKey\": currentKey, \"tileLayerURL\": tileLayerURL,\n                \"zoom\": zoom, maxZoom: 18, tileSize: 512, zoomOffset: -1, detectRetina: true,\n                defaultLocation: [51.505, -0.09], \"type\": type };\n  };\n\nexport function getTileLayer(mapConf){\n  //console.log(mapConf);\n  if(mapConf && mapConf.tilesProvider){\n    // Allow SVG tiles from 'gl' providers (MapTiler for instance)\n    if(mapConf.type == 'gl'){\n      return new L.mapboxGL({\n        attribution: mapConf.attribution,\n        style: mapConf.tileLayerURL\n      });\n    } else {\n      // Raster tiles\n      return new L.tileLayer(mapConf.tileLayerURL,\n        {\n          key: mapConf.currentKey,\n          maxZoom: mapConf.maxZoom,\n          attribution: mapConf.attribution,\n          id: mapConf.currentStyle,\n          tileSize: mapConf.tileSize,\n          zoomOffset: mapConf.zoomOffset,\n          detectRetina: mapConf.detectRetina\n        });\n    }\n  }\n};\n\n\nexport function createMap(pid) {\nconsole.log(\"create map\");\n  let so = {};\n\n  so.postId = pid;//this.attrs.post.id();\n  so.mapConf = getMapConfig();\n\n  // copy this for usage within .each()\n  //let so = this;\n\n  //for each gpx file in this post, loop and map\n  $('.mapFile-container').each(function( i ) {\n\n    // grab the uploaded gpx file's UUID and url\n    let uuid = $(this).children('.mapFile').data('fofUploadDownloadUuid');\n    let nid = 'map-'+so.postId+i+'-'+uuid;\n    let url = app.forum.attribute('apiUrl') + '/fof/download';\n            url += '/' + uuid;\n            url += '/' + so.postId;\n            url += '/' + app.session.csrfToken;\n\n    let fileExt = $(this).children('.mapFile').data('mapUrl').split('.').pop().toLowerCase();\n\n    /*  change the template rendering to insert a new id to the map element.\n      * this allows us to have an unique div id even if a same file is displayed\n      * more than one time\n    */\n    $(this).children('.mapFile-placeholder').prop('id', nid);\n\n    // Get the map element\n    let map = L.map(nid);\n    map.addControl(new L.Control.Fullscreen());\n\n    // Set the tiles provider\n    getTileLayer(so.mapConf).addTo(map);\n\n    if(fileExt == 'gpx'){\n    // Display the GPX file in it thanks to https://github.com/mpetazzoni/leaflet-gpx\n    new L.GPX(url,\n        {\n          async: true,\n          marker_options: {\n            startIconUrl: '/assets/extensions/jeromegillard-map/pin-icon-start.png',\n            endIconUrl: '/assets/extensions/jeromegillard-map/pin-icon-end.png',\n            shadowUrl: '/assets/extensions/jeromegillard-map/pin-shadow.png',\n            wptIconUrls: {\n              '': '/assets/extensions/jeromegillard-map/default-waypoint.png',\n              'Geocache Found': '/assets/extensions/jeromegillard-map/geocache.png',\n              'Park': '/assets/extensions/jeromegillard-map/tree.png'\n            },\n          }\n        }\n      ).on('loaded', function(e) {\n      map.fitBounds(e.target.getBounds());\n      }).addTo(map);\n    }\n\n    else if(fileExt == 'json' || fileExt == 'geojson'){\n      fetch(url)\n        .then(response => response.json())\n        .then(json => {\n\n          function onEachFeature(feature, layer) {\n            var popupContent = '';\n\n            if (feature.properties && feature.properties.name) {\n              popupContent += feature.properties.name;\n            }\n\n            layer.bindPopup(popupContent);\n          }\n\n          var geoJSONLayer = L.geoJSON([json], {\n            style: function (feature) {\n              if( feature.properties && feature.properties.colour){\n                return {\n                  color: feature.properties.colour,\n                  weight: 3,\n                  opacity: 1\n                  };\n              }\n            },\n            onEachFeature: onEachFeature,\n          }).addTo(map);\n          map.fitBounds(geoJSONLayer.getBounds());\n          });\n    }\n\n    else {\n      map.setView(so.mapConf.defaultLocation, so.mapConf.zoom);\n    }\n\n  });\n\n  // for each map location from BBCode, loop and map\n  $('.bbcode-map').each(function( i ) {\n    let location = $(this).data('mapLocation');\n    let mapConf = getMapConfig(\n      $(this).data('mapProvider'),\n      $(this).data('mapStyle'),\n      $(this).data('mapZoom')\n    )\n    const nid = 'map-'+Math.floor(Math.random() * 1000);\n    $(this).prop('id', nid);\n\n    if(location){\n      // resolve location as coordinates\n      fetch(`https://nominatim.openstreetmap.org/search?q=${location}&format=json`)\n        .then(response => response.json())\n        .then(json => {\n\n          // Get the map element\n          let map = L.map(nid);\n          map.addControl(new L.Control.Fullscreen());\n          // Set the tiles provider\n          getTileLayer(mapConf).addTo(map);\n          map.setView([json[0].lat, json[0].lon], mapConf.zoom);\n        });\n    }\n  });\n};\n","import Model from 'flarum/common/Model';\nimport mixin from 'flarum/common/utils/mixin';\n\nexport default class mapFile extends mixin(Model, {\n    baseName: Model.attribute('baseName'),\n    path: Model.attribute('path'),\n    url: Model.attribute('url'),\n    type: Model.attribute('type'),\n    size: Model.attribute('size'),\n    humanSize: Model.attribute('humanSize'),\n    createdAt: Model.attribute('createdAt'),\n    uuid: Model.attribute('uuid'),\n    tag: Model.attribute('tag'),\n    hidden: Model.attribute('hidden')\n}){\n\n\n    /**\n     * Use FoF Uploads endpoint\n     */\n    apiEndpoint() {\n        return '/fof/uploads' + (this.exists ? '/' + this.data.id : '');\n    }\n\n    /**\n     * Generate bbcode for this file\n     */\n    bbcode() {\n        //console.log('checking', this.tag())\n        switch (this.tag()) {\n            case 'jeromegillard-map':\n                return `[upl-file uuid=${this.uuid()} size=${this.humanSize()} url=${this.url()}]${this.baseName()}[/upl-file]`;\n            // File\n            case 'file':\n                return `[upl-file uuid=${this.uuid()} size=${this.humanSize()}]${this.baseName()}[/upl-this]`;\n\n            // Image template\n            case 'image':\n                return `[upl-image uuid=${this.uuid()} size=${this.humanSize()} url=${this.url()}]${this.baseName()}[/upl-image]`;\n\n            // Image preview\n            case 'image-preview':\n                return `[upl-image-preview url=${this.url()}]`;\n\n            // 'just-url' or unknown\n            default:\n                return this.url();\n        }\n            \n    }\n\n\n}\n","import app from 'flarum/forum/app';\nimport Post from 'flarum/components/Post';\nimport Page from 'flarum/components/Page';\nimport { extend } from 'flarum/common/extend';\nimport TextEditor from 'flarum/common/components/TextEditor';\nimport TextEditorButton from 'flarum/common/components/TextEditorButton';\nimport mapFile from './components/mapFile';\nimport insertAtCursor from './components/mapBBCode';\nimport { createMap, getMapConfig, getTileLayer } from './components/mapConfigHelper';\n\napp.initializers.add('jeromegillard/osm', () => {\n  app.store.models.files = mapFile;\n\n  extend(TextEditor.prototype, 'toolbarItems', function (items) {\n    let mapConf = getMapConfig();\n    items.add(\n      'bbcode',\n      <TextEditorButton onclick={() => insertAtCursor(mapConf.tilesProvider, mapConf.currentStyle, mapConf.zoom)} icon={'fas fa-map'}>\n        {app.translator.trans('jeromegillard-map.forum.text_editor.bbcode_tooltip')}\n      </TextEditorButton>\n    );\n  });\n\n});\n\nextend(Page.prototype, 'oncreate', function(){\n  console.log(\"Post.onCreate\");\n\n  if(this.attrs.routeName == 'page'){\n    console.log(\"Post.onCreate page\", this.attrs.id);\n    createMap(this.attrs.id);\n  }\n});\nextend(Post.prototype, 'oncreate', function(){\n  console.log(\"Post.onCreate\");\n  this.pid = this.attrs.post.id();\n  createMap(this.pid);\n});\n","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/app'];","module.exports = flarum.core.compat['common/components/TextEditor'];","module.exports = flarum.core.compat['common/components/TextEditorButton'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/utils/mixin'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/Post'];","module.exports = flarum.core.compat['forum/app'];","var _typeof = require(\"./typeof.js\")[\"default\"];\n\nfunction _regeneratorRuntime() {\n  \"use strict\";\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) {\n            if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n          }\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) {\n      keys.push(key);\n    }\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) {\n        \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n      }\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\n\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\n\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/common';\nexport * from './src/forum';\n"],"names":["app","initializers","add","console","log","insertAtCursor","tilesProvider","style","zoom","input","document","querySelector","pos","selectionStart","front","value","substring","back","length","middle","translator","trans","selectionEnd","focus","getMapConfig","o_tilesProvider","o_style","o_zoom","forum","attribute","currentStyle","currentKey","tileLayerURL","attribution","type","maxZoom","tileSize","zoomOffset","detectRetina","defaultLocation","getTileLayer","mapConf","L","mapboxGL","tileLayer","key","id","createMap","pid","so","postId","$","each","i","uuid","children","data","nid","url","session","csrfToken","fileExt","split","pop","toLowerCase","prop","map","addControl","Control","Fullscreen","addTo","GPX","async","marker_options","startIconUrl","endIconUrl","shadowUrl","wptIconUrls","on","e","fitBounds","target","getBounds","fetch","then","response","json","onEachFeature","feature","layer","popupContent","properties","name","bindPopup","geoJSONLayer","geoJSON","colour","color","weight","opacity","setView","location","Math","floor","random","lat","lon","Model","mixin","mapFile","apiEndpoint","exists","bbcode","tag","humanSize","baseName","path","size","createdAt","hidden","Post","Page","extend","TextEditor","TextEditorButton","store","models","files","prototype","items","attrs","routeName","post","_typeof","require","_regeneratorRuntime","module","exports","__esModule","Op","Object","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","arg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","done","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","undefined","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","constructor","mark","setPrototypeOf","__proto__","awrap","Promise","iter","keys","object","reverse","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","_catch","thrown","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","_inheritsLoose","subClass","superClass","_setPrototypeOf","o","p","bind"],"sourceRoot":""}