{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@jeromegillard/osm/./src/admin/index.js","webpack://@jeromegillard/osm/./src/common/index.ts","webpack://@jeromegillard/osm/external root \"flarum.core.compat['admin/app']\"","webpack://@jeromegillard/osm/external root \"flarum.core.compat['common/app']\"","webpack://@jeromegillard/osm/webpack/bootstrap","webpack://@jeromegillard/osm/webpack/runtime/compat get default export","webpack://@jeromegillard/osm/webpack/runtime/define property getters","webpack://@jeromegillard/osm/webpack/runtime/hasOwnProperty shorthand","webpack://@jeromegillard/osm/webpack/runtime/make namespace object","webpack://@jeromegillard/osm/./admin.ts"],"sourcesContent":["import app from 'flarum/admin/app';\n\napp.initializers.add('jeromegillard/osm', () => {\n\n  let currentTilesProvider = app.data.settings[\"jeromegillard-osm.tilesProvider\"]??'osm';\n\n  // As we don't know when the elements will be created, wait for them to display only the relevant ones.\n  const observer = new MutationObserver(function() {\n    console.log($('.toggle-setting-block').length);\n      if ($('.toggle-setting-block').length == 5) {\n          toggleSettingBlocks();\n          observer.disconnect();\n      }\n  });\n  observer.observe(document.querySelector('body'), { childList: true });\n\n  // Display only the relevant settings block\n  const toggleSettingBlocks= () => {\n    $('.toggle-setting-block').closest('.Form-group').hide();\n    $('.'+currentTilesProvider+'-setting').closest('.Form-group').show();\n  };\n  \n  app.extensionData\n    .for('jeromegillard-osm')\n\n    // Tile provider selection\n    .registerSetting(\n      {\n        setting: 'jeromegillard-osm.tilesProvider',\n        label: app.translator.trans('jeromegillard-osm.admin.settings.tiles_provider.label'),\n        help: app.translator.trans('jeromegillard-osm.admin.settings.tiles_provider.help'),\n        type: 'select',\n        options: {\n          'osm': 'OpenStreetMap', \n          'mapbox': 'Mapbox',\n          'thunderforest': 'Thunderforest'\n        },\n        default: 'osm',\n        className: 'select-tilesProvider'\n      },\n      30\n    )\n    // Default zoom\n    .registerSetting(\n      {\n        setting: 'jeromegillard-osm.zoom',\n        label: app.translator.trans('jeromegillard-osm.admin.settings.zoom.label'),\n        help: app.translator.trans('jeromegillard-osm.admin.settings.zoom.help'),\n        type: 'text',\n        className: 'zoom-setting',\n        placeholder: 13\n      },\n      1)\n\n    // OpenStreetMap\n    .registerSetting( () => {\n      return(\n        <div className=\"Form-group\">\n            <div class=\"helpText osm-setting  toggle-setting-block\">{app.translator.trans('jeromegillard-osm.admin.settings.osm.help')} | <a href=\"https://operations.osmfoundation.org/policies/tiles\" target=\"_blank\">{app.translator.trans('jeromegillard-osm.admin.settings.tiles_provider.tile_usage_policy')}.</a></div>\n          </div>\n        )\n      },\n      30)\n\n    // Mapbox key\n    .registerSetting(\n      {\n        setting: 'jeromegillard-osm.mapbox.key',\n        label: app.translator.trans('jeromegillard-osm.admin.settings.mapbox.label'),\n        help: app.translator.trans('jeromegillard-osm.admin.settings.mapbox.help'),\n        type: 'text',\n        className: 'mapbox-setting toggle-setting-block'\n      },\n      21)\n    // Mapbox styles (https://docs.mapbox.com/api/maps/styles/#mapbox-styles)\n    .registerSetting(\n      {\n        setting: 'jeromegillard-osm.mapbox.style',\n        label: app.translator.trans('jeromegillard-osm.admin.settings.style.label'),\n        help: app.translator.trans('jeromegillard-osm.admin.settings.style.help'),\n        type: 'select',\n        options: {\n          'mapbox/streets-v11': 'Streets', \n          'mapbox/outdoors-v11': 'Outdoors',\n          'mapbox/light-v10': 'Light',\n          'mapbox/dark-v10': 'Dark',\n          'mapbox/satellite-v9': 'Satelite',\n          'mapbox/satellite-streets-v11': 'Satelite streets',\n          'mapbox/navigation-day-v1': 'Navigation day',\n          'mapbox/navigation-night-v1': 'Navigation night',\n        },\n        default: 'mapbox/streets-v11',\n        className: 'mapbox-setting mapbox-style toggle-setting-block'\n      },\n      20)\n\n    // Thunderforest key  \n    .registerSetting(\n      {\n        setting: 'jeromegillard-osm.thunderforest.key',\n        label: app.translator.trans('jeromegillard-osm.admin.settings.thunderforest.label'),\n        help: app.translator.trans('jeromegillard-osm.admin.settings.thunderforest.help'),\n        type: 'text',\n        className: 'thunderforest-setting toggle-setting-block'\n      },\n      31)\n    // Thunderforest style\n    .registerSetting(\n      {\n        setting: 'jeromegillard-osm.thunderforest.style',\n        label: app.translator.trans('jeromegillard-osm.admin.settings.style.label'),\n        help: app.translator.trans('jeromegillard-osm.admin.settings.style.help'),\n        type: 'select',\n        options: {\n          'cycle': 'cycle', \n          'transport': 'transport',\n          'landscape': 'landscape',\n          'outdoors': 'outdoors',\n          'transport-dark': 'transport-dark',\n          'spinal-map': 'spinal-map',\n          'pioneer': 'pioneer',\n          'mobile-atlas': 'mobile-atlas',\n          'neighbourhood': 'neighbourhood',\n          'atlas': 'atlas',\n        },\n        default: 'atlas',\n        className: 'thunderforest-setting thunderforest-style toggle-setting-block'\n      },\n      30)\n\n    // TODO: add openmaptiles https://openmaptiles.org/styles/\n\n    // Toogle settings blocks on provider change\n    .registerSetting( () => {      \n      if($('.select-tilesProvider')[0]){\n        currentTilesProvider = $('.select-tilesProvider')[0].value;\n      }\n      toggleSettingBlocks();\n    },\n    0)\n});\n","import app from 'flarum/common/app';\n\napp.initializers.add('jeromegillard/osm', () => {\n  console.log('[jeromegillard/osm] Hello, forum and admin!');\n});\n","module.exports = flarum.core.compat['admin/app'];","module.exports = flarum.core.compat['common/app'];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/common';\nexport * from './src/admin';\n"],"names":["app","initializers","add","currentTilesProvider","data","settings","observer","MutationObserver","console","log","$","length","toggleSettingBlocks","disconnect","observe","document","querySelector","childList","closest","hide","show","extensionData","registerSetting","setting","label","translator","trans","help","type","options","className","placeholder","value"],"sourceRoot":""}